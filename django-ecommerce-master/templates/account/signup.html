{% extends "account/base.html" %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block head_title %}{% trans "Signup" %}{% endblock %}
{% block style %}
<style>
  html,
    body,
    header,
    .view {
      height: 100%;
    }

    @media (min-width: 851px) and (max-width: 1440px) {
      html,
      body,
      header,
      .view {
        height: 850px;
      }
    }

    @media (min-width: 800px) and (max-width: 850px) {
      html,
      body,
      header,
      .view {
        height: 1000px;
      }
    }

    @media (min-width: 451px) and (max-width: 740px) {
      html,
      body,
      header,
      .view {
        height: 1200px;
      }
    }

    @media (max-width: 450px) {
      html,
      body,
      header,
      .view {
        height: 1400px;
      }
    }

    .intro-2 {
      background: url("https://mdbootstrap.com/img/Photos/Others/forest1.jpg")no-repeat center center;
      background-size: cover;
    }

    .top-nav-collapse {
      background-color: #3f51b5 !important;
    }

    .navbar:not(.top-nav-collapse) {
      background: transparent !important;
    }

    @media (max-width: 768px) {
      .navbar:not(.top-nav-collapse) {
        background: #3f51b5 !important;
      }
    }
    @media (min-width: 800px) and (max-width: 850px) {
        .navbar:not(.top-nav-collapse) {
            background: #3f51b5!important;
        }
    }

    .rgba-gradient {
      background: -webkit-linear-gradient(98deg, rgba(22, 91, 231, 0.5), rgba(255, 32, 32, 0.5) 100%);
      background: -webkit-gradient(linear, 98deg, from(rgba(22, 91, 231, 0.5)), to(rgba(255, 32, 32, 0.5)));
      background: linear-gradient(to 98deg, rgba(22, 91, 231, 0.5), rgba(255, 32, 32, 0.5) 100%);
    }

    .card {
      background-color: rgba(255, 255, 255, 0.85);
    }

    h6 {
      line-height: 1.7;
    }
</style>
{% endblock style %}
{% block content %}
<body class="register-page">

  <!-- Main Navigation -->
  <header>

   
    <!-- Intro Section -->
    <section class="view intro-2">
      <div class="mask rgba-gradient">
        <div class="container h-100 d-flex justify-content-center align-items-center">
            <div class="container">
          <!-- Grid row -->
          <div class="row pt-5">

            <!-- Grid column -->
            <div class="col-md-12 col-lg-12">

              <div class="card">
                <div class="card-body">

                  <h2 class="font-weight-bold my-4 text-center mb-5 mt-4 font-weight-bold">
                    <strong><h1>{% trans "Sign Up" %}</h1></strong>
                  </h2>
                  <hr>

                  <!-- Grid row -->
                  <div class="row mt-5">

                    <!-- Grid column -->
                    <div class="col-md-6 ml-lg-5 ml-md-3">

                      <!-- Grid row -->
                      <div class="row pb-4">
                        <div class="col-2 col-lg-1">
                          <i class="fas fa-university indigo-text fa-lg"></i>
                        </div>
                        <div class="col-10">
                          <h4 class="font-weight-bold mb-4">
                            <strong>Safety</strong>
                          </h4>
                          <p class="">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reprehenderit maiores
                            nam, aperiam
                            minima assumenda deleniti hic.</p>
                        </div>
                      </div>
                      <!-- Grid row -->

                      <!-- Grid row -->
                      <div class="row pb-4">
                        <div class="col-2 col-lg-1">
                          <i class="fas fa-desktop deep-purple-text fa-lg"></i>
                        </div>
                        <div class="col-10">
                          <h4 class="font-weight-bold mb-4">
                            <strong>Technology</strong>
                          </h4>
                          <p class="">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reprehenderit maiores
                            nam, aperiam
                            minima assumenda deleniti hic.</p>
                        </div>
                      </div>
                      <!-- Grid row -->

                      <!-- Grid row -->
                      <div class="row pb-4">
                        <div class="col-2 col-lg-1">
                          <i class="far fa-money-bill-alt purple-text fa-lg"></i>
                        </div>
                        <div class="col-10">
                          <h4 class="font-weight-bold mb-4">
                            <strong>Finance</strong>
                          </h4>
                          <p class="">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reprehenderit maiores
                            nam, aperiam
                            minima assumenda deleniti hic.</p>
                        </div>
                      </div>
                      <!-- Grid row -->

                    </div>
                    <!-- Grid column -->

                    <!-- Grid column -->
                    <div class="col-md-5">

                      <!-- Grid row -->
                      <div class="row pb-4 d-flex justify-content-center mb-4">
                         
                         
                        <h4 class="mt-3 mr-4">
                          <strong>Login with</strong>
                        </h4>

                        <div class="inline-ul text-center d-flex justify-content-center">
                          <a class="p-2 m-2 fa tw-ic">
                            <i class="fab fa-twitter fa-lg indigo-text"></i>
                          </a>
                          <a class="p-2 m-2 fa li-ic">
                            <i class="fab fa-linkedin-in fa-lg indigo-text"> </i>
                          </a>
                          <a class="p-2 m-2 fa ins-ic">
                            <i class="fab fa-instagram fa-lg indigo-text"> </i>
                          </a>
                        </div>

                        <h4 class="mt-3 ml-4">
                          <strong>or:</strong>
                        </h4>
                     
                      </div>
                      <!-- /Grid row -->

                      <!-- Body -->
                     
                        <form class="signup" id="signup_form" method="post" action="{% url 'account_signup' %}">
                          {% csrf_token %}
                          

                          
                                     <div class="md-form">
                            <label for="orangeForm-fname">first name<span style="color: red;"> *</span></label>
                            <input type="text" id="orangeForm-fname" name="first_name" class="form-control" required>
                           
                          </div>
                          <div class="md-form">
                                                        <label for="orangeForm-lname">last name<span style="color: red;"> *</span></label>

                            <input type="text" id="orangeForm-lname" name="last_name" class="form-control" required>
                          </div>
                          <div class="md-form">
                                                       <label for="orangeForm-uname">username<span style="color: red;"> *</span></label>

                            <input type="text" id="orangeForm-uname" name="username"  class="form-control" required>
                            <div id="Uname">
                              Looks good!
                            </div>
                          </div>
                          <div class="md-form">
                                                       <label for="orangeForm-email">email<span style="color: red;"> *</span></label>

                            <input type="text" id="orangeForm-email"  name="email" class="form-control" required>
                          </div>
                         
                          <div class="md-form">
                                                       <label for="orangeForm-pass">password<span style="color: red;"> *</span></label>

                            <input type="password" id="orangeForm-pass" name="password1" class="form-control" required>
                          </div>
                          <div class="md-form">
                                                    <label for="orangeForm-pass">repeat password<span style="color: red;"> *</span></label>

                            <input type="password" id="orangeForm-pass1"  name="password2" class="form-control" required>
                          </div>
                          <div class="md custom-control custom-checkbox ">
                            <input type="checkbox" name="retailer" id="defaultUnchecked" class="custom-control-input">
                            <label for="defaultUnchecked" class="custom-control-label"><span style="color: red;">want to sell with us?</span></label>
                          </div>
                          <div class='hideable_fields'>
                            <div class="md-form">
                                                      <label for="orangeForm-cname">company</label>

                            <input type="text" id="orangeForm-cname" name="company" class="form-control">
                          </div>
                          </div>

                          <input type="hidden" name="{{ redirect_field_name }}" value="{% url 'account_login' %}" />
                        <div class="text-center">
                           <button class="btn btn-indigo btn-rounded mt-5" type="submit">{% trans "Sign Up" %} &raquo;</button>
                        </div>
                         
                        </form>
                      
                    </div>
                    <!-- Grid column -->

                  </div>
                  <!-- Grid row -->

                </div>
              </div>

            </div>
            <!-- Grid column -->

          </div>
          <!-- Grid row -->
            </div>
        </div>
      </div>
    </section>
    <!-- Intro Section -->

  </header>
  <!-- Main Navigation -->


</body>


{% endblock %}
{% block extra_scripts %}
<script>
 
    
    var hideable_fields = $('.hideable_fields');
    var retailer = document.querySelector("input[name=retailer]");
    $(document).ready(function(){
       document.getElementById('orangeForm-cname').disabled = true;
       hideable_fields.hide();
      retailer.addEventListener('change', function () {
      if (this.checked) {
        document.getElementById('orangeForm-cname').disabled=false;
        hideable_fields.show();
      } 
      else {
         document.getElementById('orangeForm-cname').disabled = true;
        hideable_fields.hide();
      }
    });
    })
    

    $("#orangeForm-uname").change(function(){
      var username=$(this).val();
      
      $.ajax({
        url:'{% url "core:validate_username" %}',
        data:{'username':username},
        dataType:'json',
        success:function(data){
          if (data.is_taken){
            document.getElementById("Uname").className="invalid-feedback";
            alert("user exists")
            
          }
        }
      });
    });
  
</script>
{% endblock extra_scripts %}